<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>STYLUX DEALS - Premium Online Deals</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Font Awesome -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />

    <!-- Tailwind CSS (CDN) -->
    <script src="https://cdn.jsdelivr.net/npm/@tailwindcss/browser@4"></script>

    <style>
      /* CSS Reset and Base Styles */
      *,
      *::before,
      *::after {
        box-sizing: border-box;
        margin: 0;
        padding: 0;
      }

      :root {
        --bg-main: #020617;
        --bg-elevated: #020617;
        --card-bg: #020617;
        --accent: #4f46e5;
        --accent-soft: rgba(79, 70, 229, 0.18);
        --text-main: #e5e7eb;
        --text-muted: #9ca3af;
        --border-subtle: rgba(148, 163, 184, 0.25);
        --radius-xl: 1.4rem;
        --radius-lg: 1.1rem;
        --success: #10b981;
        --warning: #f59e0b;
        --danger: #ef4444;
        --amazon: #ff9900;
        --flipkart: #3366cc;
        --meesho: #c82e7c;
        --myntra: #ff6699;
      }

      html,
      body {
        margin: 0;
        padding: 0;
        font-family: system-ui, -apple-system, BlinkMacSystemFont, "SF Pro Text",
          "Segoe UI", sans-serif;
        color: var(--text-main);
        background: radial-gradient(
          circle at top,
          #0b1120 0,
          #020617 45%,
          #020617 100%
        );
      }

      body.no-scroll {
        overflow: hidden;
      }

      /* ===== Header ===== */
      .top-bar {
        position: sticky;
        top: 0;
        z-index: 20;
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 0.75rem 1.1rem;
        background: rgba(2, 6, 23, 0.9);
        backdrop-filter: blur(16px);
        border-bottom: 1px solid rgba(15, 23, 42, 0.9);
      }

      .brand {
        display: flex;
        align-items: center;
        gap: 0.65rem;
      }

      .logo {
        width: 48px;
        height: 48px;
        border-radius: 50%;
        object-fit: cover;
        border: 1px solid rgba(148, 163, 184, 0.6);
      }

      .brand-text {
        display: flex;
        flex-direction: row;
        align-items: baseline;
        gap: 0.3rem;
        line-height: 1;
      }

      .brand-title {
        font-size: 1.05rem;
        letter-spacing: 0.18em;
        font-weight: 700;
        text-transform: uppercase;
      }

      .brand-subtitle {
        font-size: 1.05rem;
        letter-spacing: 0.18em;
        font-weight: 700;
        text-transform: uppercase;
        color: var(--text-main);
      }

      /* Join Links */
      .join-links {
        display: flex;
        gap: 0.6rem;
      }

      .join-links a,
      .join-links-mobile a {
        flex: 1 1 auto;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        gap: 0.35rem;
        padding: 0.42rem 0.9rem;
        border-radius: 999px;
        text-decoration: none;
        font-weight: 600;
        letter-spacing: 0.12em;
        text-transform: uppercase;
        border: 1px solid transparent;
        font-size: 0.75rem;
        transition: transform 0.18s ease, box-shadow 0.18s ease,
          opacity 0.18s ease;
      }

      .join-links a i,
      .join-links-mobile a i {
        font-size: 0.9rem;
      }

      .insta-link {
        background: linear-gradient(135deg, #f97316, #ec4899);
        color: #f9fafb;
      }

      .yt-link {
        background: linear-gradient(135deg, #ef4444, #f97316);
        color: #fef2f2;
      }

      .tg-link {
        background: linear-gradient(135deg, #0ea5e9, #22c55e);
        color: #ecfeff;
      }

      .join-links a:hover,
      .join-links-mobile a:hover {
        transform: translateY(-1px);
        box-shadow: 0 10px 26px rgba(15, 23, 42, 0.9);
        opacity: 0.97;
      }

      /* Mobile Join Links */
      .join-links-mobile {
        display: none;
      }

      /* ===== Main Content ===== */
      main {
        max-width: 960px;
        margin: 0 auto;
        padding: 1.3rem 1.1rem 3.2rem;
      }

      /* Hero Section */
      .hero h1 {
        font-size: 1.9rem;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        margin: 0 0 0.4rem;
        font-weight: 700;
      }

      .hero p {
        margin: 0;
        color: var(--text-muted);
        font-size: 0.92rem;
        line-height: 1.6;
      }

      /* Search Area */
      .search-area {
        margin-top: 1.4rem;
        display: flex;
        flex-direction: column;
        gap: 0.7rem;
      }

      .search-box {
        display: flex;
        align-items: center;
        gap: 0.55rem;
        padding: 0.65rem 0.9rem;
        border-radius: 999px;
        border: 1px solid var(--border-subtle);
        background: radial-gradient(circle at top left, #020617, #020617);
      }

      .search-icon {
        font-size: 1.1rem;
        color: var(--text-muted);
      }

      .search-box input {
        flex: 1;
        border: none;
        background: transparent;
        outline: none;
        color: var(--text-main);
        font-size: 0.92rem;
      }

      .search-box input::placeholder {
        color: #6b7280;
      }

      .category-select {
        width: 100%;
        padding: 0.6rem 0.9rem;
        border-radius: 999px;
        border: 1px solid var(--border-subtle);
        background: #020617;
        color: var(--text-main);
        font-size: 0.9rem;
      }

      /* ===== Products Section ===== */
      .products-section {
        margin-top: 1.7rem;
      }

      .section-header {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
        margin-bottom: 1rem;
      }

      .section-header h2 {
        font-size: 1.1rem;
        letter-spacing: 0.16em;
        text-transform: uppercase;
        margin: 0;
        font-weight: 600;
      }

      .section-header p {
        margin: 0;
        font-size: 0.85rem;
        color: var(--text-muted);
      }

      .products-grid {
        display: grid;
        grid-template-columns: 1fr;
        gap: 0.9rem;
      }

      /* Product Card */
      .product-card {
        display: flex;
        flex-direction: row;
        gap: 0.75rem;
        padding: 0.8rem;
        border-radius: var(--radius-lg);
        background: radial-gradient(circle at top, #020617 0, #020617 90%);
        border: 1px solid rgba(31, 41, 55, 0.9);
        cursor: pointer;
        transition: border-color 0.18s ease, transform 0.18s ease,
          box-shadow 0.18s ease, background 0.18s ease;
      }

      .product-card:hover {
        border-color: rgba(96, 165, 250, 0.9);
        transform: translateY(-1px);
        box-shadow: 0 12px 30px rgba(15, 23, 42, 0.9);
      }

      .product-image-wrap {
        flex: 0 0 90px;
        height: 90px;
        overflow: hidden;
        border-radius: 0.9rem;
        background: #020617;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .product-image-wrap img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        display: block;
      }

      .product-body {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }

      .product-body h3 {
        margin: 0;
        font-size: 0.98rem;
        font-weight: 600;
      }

      .product-price {
        margin: 0.2rem 0;
      }

      .discount-price .price-container {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.2rem;
      }

      .original-price {
        font-size: 0.85rem;
        color: var(--text-muted);
        text-decoration: line-through;
        opacity: 0.7;
      }

      .discount-badge {
        background: var(--success);
        color: white;
        font-size: 0.7rem;
        padding: 0.1rem 0.4rem;
        border-radius: 999px;
        font-weight: 600;
      }

      .current-price {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--success);
      }

      .limited-offer {
        display: flex;
        align-items: center;
        gap: 0.4rem;
        margin: 0.3rem 0;
        font-size: 0.8rem;
        color: var(--warning);
      }

      .limited-offer i {
        font-size: 0.9rem;
      }

      .limited-offer.expired {
        color: var(--danger);
      }

      .product-desc {
        margin: 0;
        font-size: 0.86rem;
        color: var(--text-main);
        line-height: 1.4;
      }

      .product-cta {
        margin-top: 0.15rem;
        font-size: 0.78rem;
        color: #a5b4fc;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .no-results {
        margin-top: 1rem;
        font-size: 0.9rem;
        color: var(--text-muted);
      }

      /* ===== Modal ===== */
      .product-modal {
        position: fixed;
        inset: 0;
        display: none;
        z-index: 40;
      }

      .product-modal.open {
        display: block;
      }

      .product-modal-backdrop {
        position: absolute;
        inset: 0;
        background: rgba(15, 23, 42, 0.78);
      }

      .product-modal-panel {
        position: relative;
        max-width: 560px;
        margin: 3.2rem auto 1.5rem;
        padding: 1.25rem 1.2rem 1.4rem;
        background: radial-gradient(circle at top, #020617, #020617);
        border-radius: var(--radius-xl);
        border: 1px solid rgba(55, 65, 81, 0.9);
        box-shadow: 0 18px 60px rgba(0, 0, 0, 0.9);
        max-height: calc(100vh - 5rem);
        overflow-y: auto;
      }

      .close-modal {
        position: absolute;
        top: 0.6rem;
        right: 0.7rem;
        border: none;
        background: transparent;
        color: #9ca3af;
        font-size: 1.6rem;
        line-height: 1;
        cursor: pointer;
        transition: color 0.3s ease;
      }

      .close-modal:hover {
        color: var(--text-main);
      }

      .modal-header {
        display: flex;
        gap: 0.85rem;
        margin-bottom: 0.7rem;
      }

      .modal-image-wrap {
        flex: 0 0 90px;
        height: 90px;
        border-radius: 1rem;
        overflow: hidden;
        background: #020617;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .modal-image-wrap img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
        display: block;
      }

      .modal-title-wrap h2 {
        margin: 0 0 0.2rem;
        font-size: 1.1rem;
        font-weight: 700;
      }

      .modal-meta {
        margin: 0;
        font-size: 0.8rem;
        letter-spacing: 0.18em;
        text-transform: uppercase;
        color: var(--text-muted);
      }

      .modal-description {
        margin: 0.2rem 0 0.5rem;
        font-size: 0.9rem;
        color: var(--text-main);
        line-height: 1.5;
      }

      .features-list {
        list-style: disc;
        padding-left: 1.1rem;
        margin: 0 0 0.9rem;
        font-size: 0.88rem;
        color: var(--text-main);
      }

      .features-list li + li {
        margin-top: 0.18rem;
      }

      .price-section {
        margin: 0.8rem 0;
      }

      .price-section .price-container {
        margin-bottom: 0.5rem;
      }

      .price-section .price-row {
        display: flex;
        align-items: center;
        gap: 0.5rem;
        margin-bottom: 0.2rem;
      }

      .price-section .original-price {
        font-size: 0.9rem;
        color: var(--text-muted);
        text-decoration: line-through;
        opacity: 0.7;
      }

      .price-section .current-price {
        font-size: 1.3rem;
        font-weight: 700;
        color: var(--success);
      }

      .price-section .limited-offer {
        margin: 0.5rem 0;
        font-size: 0.9rem;
      }

      /* ===== Store Buttons (Font Awesome icons only) ===== */
      .store-buttons {
        display: flex;
        flex-wrap: wrap;
        gap: 0.45rem;
        margin-top: 1rem;
      }

      .store-btn {
        flex: 1 1 48%;
        text-align: center;
        padding: 0.55rem 0.4rem;
        border-radius: 999px;
        font-size: 0.83rem;
        text-decoration: none;
        color: white;
        border: none;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: 0.4rem;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .store-btn i {
        font-size: 0.95rem;
      }

      .store-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
      }

      .store-btn.amazon {
        background: var(--amazon);
      }

      .store-btn.flipkart {
        background: var(--flipkart);
      }

      .store-btn.meesho {
        background: var(--meesho);
      }

      .store-btn.myntra {
        background: var(--myntra);
      }

      /* ===== Footer ===== */
      .footer {
        max-width: 960px;
        margin: 0 auto 1.4rem;
        padding: 1.5rem 1.1rem;
        border-top: 1px solid rgba(15, 23, 42, 0.9);
      }

      .footer-content {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 1.2rem;
      }

      .footer-brand {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 0.5rem;
      }

      .footer-logo {
        width: 40px;
        height: 40px;
        border-radius: 999px;
        object-fit: cover;
        border: 1px solid rgba(148, 163, 184, 0.6);
      }

      .footer-tagline {
        font-size: 0.85rem;
        color: var(--text-muted);
        letter-spacing: 0.05em;
      }

      .footer-social {
        display: flex;
        gap: 1.2rem;
      }

      .footer-social a {
        color: var(--text-muted);
        font-size: 1.1rem;
        transition: color 0.3s ease;
      }

      .footer-social a:hover {
        color: var(--accent);
      }

      .footer-copyright {
        font-size: 0.78rem;
        color: var(--text-muted);
        text-align: center;
      }

      .affiliate-disclosure {
        font-size: 0.7rem;
        color: var(--text-muted);
        text-align: center;
        margin-top: 0.5rem;
        line-height: 1.4;
      }

      /* ===== Responsive ===== */
      @media (min-width: 640px) {
        main {
          padding-top: 1.6rem;
        }

        .hero h1 {
          font-size: 2.1rem;
        }

        .products-grid {
          grid-template-columns: repeat(2, minmax(0, 1fr));
        }

        .product-card {
          flex-direction: column;
        }

        .product-image-wrap {
          flex-basis: auto;
          width: 100%;
          height: 150px;
        }

        .product-body h3 {
          font-size: 1.05rem;
        }

        .product-desc {
          font-size: 0.9rem;
        }
      }

      @media (min-width: 960px) {
        .products-grid {
          grid-template-columns: repeat(3, minmax(0, 1fr));
        }
      }

      @media (max-width: 768px) {
        .top-bar {
          justify-content: center; /* Mobile par logo aur header center aligned */
          padding-inline: 0.9rem;
        }

        /* Header join buttons hide on mobile, neeche wale use karo */
        .join-links {
          display: none;
        }

        .join-links-mobile {
          display: flex;
          justify-content: space-between;
          gap: 0.5rem;
          padding: 0.5rem 0.9rem 0.6rem;
          background: radial-gradient(circle at top, #020617 0, #020617 100%);
          border-bottom: 1px solid rgba(15, 23, 42, 0.95);
          box-shadow: 0 10px 30px rgba(15, 23, 42, 0.9);
        }

        .product-modal-panel {
          margin: 2.4rem 0.9rem 1.2rem;
          max-height: calc(100vh - 4rem);
        }
      }
    </style>
  </head>
  <body>
    <!-- ===== HEADER ===== -->
    <header class="top-bar">
      <div class="brand">
        <img src="logo.jpg" alt="Stylux Deals logo" class="logo" />
        <div class="brand-text">
          <span class="brand-title">STYLUX</span>
          <span class="brand-subtitle">DEALS</span>
        </div>
      </div>

      <nav class="join-links">
        <a
          href="https://instagram.com/styluxdeals"
          target="_blank"
          rel="noopener"
          class="insta-link"
        >
          <i class="fab fa-instagram"></i> Insta
        </a>
        <a
          href="https://youtube.com/@styluxdeals"
          target="_blank"
          rel="noopener"
          class="yt-link"
        >
          <i class="fab fa-youtube"></i> YouTube
        </a>
        <a
          href="https://t.me/styluxdeals"
          target="_blank"
          rel="noopener"
          class="tg-link"
        >
          <i class="fab fa-telegram"></i> Telegram
        </a>
      </nav>
    </header>

    <!-- Mobile join links -->
    <div class="join-links-mobile">
      <a
        href="https://instagram.com/styluxdeals"
        target="_blank"
        rel="noopener"
        class="insta-link"
      >
        <i class="fab fa-instagram"></i> Insta
      </a>
      <a
        href="https://youtube.com/@styluxdeals"
        target="_blank"
        rel="noopener"
        class="yt-link"
      >
        <i class="fab fa-youtube"></i> YouTube
      </a>
      <a
        href="https://t.me/styluxdeals"
        target="_blank"
        rel="noopener"
        class="tg-link"
      >
        <i class="fab fa-telegram"></i> Telegram
      </a>
    </div>

    <!-- ===== MAIN ===== -->
    <main>
      <section class="hero">
        <h1>Stylux Deals</h1>
        <p>
          Amazon, Flipkart, Meesho, Myntra ke best online deals ek hi jagah. Search
          karo, product khol ke apna favourite store choose karo.
        </p>
      </section>

      <section class="search-area">
        <div class="search-box">
          <span class="search-icon">üîç</span>
          <input
            id="searchInput"
            type="search"
            placeholder="Search product, category, brand‚Ä¶ (earbuds, saree, shoes)"
            autocomplete="off"
          />
        </div>

        <select id="categorySelect" class="category-select">
          <option value="all">All Categories</option>
          <option value="electronics">Electronics</option>
          <option value="fashion">Fashion</option>
          <option value="home">Home &amp; Kitchen</option>
          <option value="beauty">Beauty</option>
        </select>
      </section>

      <section class="products-section" id="productsSection">
        <div class="section-header">
          <h2>Top Deals</h2>
          <p id="resultInfo">All handpicked deals for you.</p>
        </div>

        <div id="productsGrid" class="products-grid"></div>

        <p id="noResults" class="no-results" hidden>
          Koi match nahi mila. Alag keyword try karo üôÇ
        </p>
      </section>
    </main>

    <!-- ===== MODAL ===== -->
    <div id="productModal" class="product-modal" aria-hidden="true">
      <div class="product-modal-backdrop" data-close-modal></div>

      <div class="product-modal-panel" role="dialog" aria-modal="true">
        <button class="close-modal" type="button" data-close-modal>&times;</button>
        <div id="modalContent"></div>
      </div>
    </div>

    <!-- ===== FOOTER ===== -->
    <footer class="footer">
      <div class="footer-content">
        <div class="footer-brand">
          <img src="logo.jpg" alt="Stylux Deals logo" class="footer-logo" />
          <p class="footer-tagline">Premium Online Deals</p>
        </div>
        <div class="footer-social">
          <a
            href="https://instagram.com/styluxdeals"
            target="_blank"
            rel="noopener"
          >
            <i class="fab fa-instagram"></i>
          </a>
          <a
            href="https://youtube.com/@styluxdeals"
            target="_blank"
            rel="noopener"
          >
            <i class="fab fa-youtube"></i>
          </a>
          <a href="https://t.me/styluxdeals" target="_blank" rel="noopener">
            <i class="fab fa-telegram"></i>
          </a>
        </div>
        <div class="footer-copyright">
          <p>&copy; <span id="year"></span> Stylux Deals. All rights reserved.</p>
          <p class="affiliate-disclosure">
            Note: This is an affiliate website. We may earn commission from qualifying
            purchases. All product information is provided by the respective stores.
          </p>
        </div>
      </div>
    </footer>

    <!-- ===== SCRIPT ===== -->
    <script>
      const products = [
        {
          id: "p1",
          name: "boAt Rockerz 255 Neckband",
          category: "electronics",
          price: "‚Çπ1599",
          originalPrice: "‚Çπ6990",
          discount: "77%",
          limitedOffer: true,
          offerEnds: new Date(Date.now() + 86400000 * 2),
          shortDescription:
            "Bluetooth wireless neckband earphones with deep bass and clear calls.",
          description:
            "boAt Rockerz 255 wireless neckband features 10mm dynamic drivers for powerful bass, Bluetooth v5.0 for seamless connectivity, and up to 8 hours of playtime. Perfect for workouts, commuting, and daily use with its comfortable neckband design.",
          tags: ["earphones", "boat", "bluetooth", "neckband", "wireless"],
          image:
            "https://m.media-amazon.com/images/I/61XhqA34YFL._SX522_.jpg",
          features: [
            "10mm dynamic drivers for powerful sound",
            "Bluetooth v5.0 for seamless connectivity",
            "Up to 8 hours of playtime",
            "Comfortable neckband design",
            "IPX5 water and sweat resistance",
            "Built-in mic for clear calls",
          ],
          stores: {
            amazon: "https://amzn.to/49hCLLA",
            flipkart: "#",
            meesho: "#",
            myntra: "#",
          },
        },
        {
          id: "p2",
          name: "Noise Buds VS104",
          category: "electronics",
          price: "‚Çπ1099",
          originalPrice: "‚Çπ3499",
          discount: "69%",
          limitedOffer: true,
          offerEnds: new Date(Date.now() + 86400000 * 3),
          shortDescription:
            "True wireless earbuds with powerful sound and clear calls.",
          description:
            "Noise Buds VS104 are compact true wireless earbuds designed for daily use, offering punchy sound, a comfortable fit and hassle-free Bluetooth connectivity for music and calls.",
          tags: ["earbuds", "noise", "bluetooth", "tws", "wireless"],
          image:
            "https://m.media-amazon.com/images/I/51+e7yrgPpL._SL1500.jpg",
          features: [
            "True wireless stereo (TWS) earbuds",
            "Comfortable in-ear design",
            "Bluetooth wireless connectivity",
            "Ideal for music, calls and daily use",
            "Touch controls for easy operation",
            "Up to 20 hours total playtime with case",
          ],
          stores: {
            amazon: "https://amzn.to/4aWfnoc",
            flipkart: "#",
            meesho: "#",
            myntra: "#",
          },
        },
      ];

      const productsGrid = document.getElementById("productsGrid");
      const productsSection = document.getElementById("productsSection");
      const searchInput = document.getElementById("searchInput");
      const categorySelect = document.getElementById("categorySelect");
      const resultInfo = document.getElementById("resultInfo");
      const noResults = document.getElementById("noResults");
      const yearSpan = document.getElementById("year");
      const modal = document.getElementById("productModal");
      const modalContent = document.getElementById("modalContent");

      yearSpan.textContent = new Date().getFullYear();

      // Handles both "‚Çπ1599" and 1599
      function formatPrice(value) {
        if (value == null || value === "") return "";
        const num =
          typeof value === "number"
            ? value
            : parseInt(String(value).replace(/[^\d]/g, ""), 10);
        if (isNaN(num)) return String(value);
        return "‚Çπ" + num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
      }

      function renderProducts(list) {
        productsGrid.innerHTML = "";

        list.forEach((p) => {
          const card = document.createElement("article");
          card.className = "product-card";
          card.dataset.id = p.id;
          card.tabIndex = 0;

          const hasDiscount = p.originalPrice && p.originalPrice !== p.price;

          card.innerHTML = `
            <div class="product-image-wrap">
              <img src="${p.image}" alt="${p.name}" loading="lazy" />
            </div>
            <div class="product-body">
              <h3>${p.name}</h3>
              <div class="product-price ${hasDiscount ? "discount-price" : ""}">
                ${
                  hasDiscount
                    ? `
                        <div class="price-container">
                          <span class="original-price">${formatPrice(
                            p.originalPrice
                          )}</span>
                          <span class="discount-badge">${p.discount}</span>
                        </div>
                        <span class="current-price">${formatPrice(p.price)}</span>
                      `
                    : `
                        <span class="current-price">${formatPrice(p.price)}</span>
                      `
                }
              </div>
              ${
                p.limitedOffer
                  ? `
                      <div class="limited-offer">
                        <i class="fas fa-clock"></i>
                        <span class="offer-timer" data-end="${p.offerEnds.toISOString()}"></span>
                      </div>
                    `
                  : ""
              }
              <p class="product-desc">${p.shortDescription}</p>
              <span class="product-cta">Tap to view details &amp; stores</span>
            </div>
          `;

          card.addEventListener("click", () => openProduct(p.id));
          card.addEventListener("keypress", (e) => {
            if (e.key === "Enter") openProduct(p.id);
          });

          productsGrid.appendChild(card);
        });

        noResults.hidden = list.length !== 0;

        document.querySelectorAll(".offer-timer").forEach((timer) => {
          updateTimer(timer);
          const id = setInterval(() => {
            if (!document.body.contains(timer)) {
              clearInterval(id);
              return;
            }
            updateTimer(timer);
          }, 1000);
        });
      }

      function updateTimer(timer) {
        const endTime = new Date(timer.dataset.end);
        const now = new Date();
        const diff = endTime - now;
        if (diff <= 0) {
          timer.textContent = "Offer expired";
          timer.parentElement.classList.add("expired");
          return;
        }
        const hours = Math.floor(diff / (1000 * 60 * 60));
        const minutes = Math.floor(
          (diff % (1000 * 60 * 60)) / (1000 * 60)
        );
        const seconds = Math.floor((diff % (1000 * 60)) / 1000);
        timer.textContent = `${hours}h ${minutes}m ${seconds}s`;
      }

      function filterProducts() {
        const term = searchInput.value.trim().toLowerCase();
        const cat = categorySelect.value;

        const filtered = products.filter((p) => {
          const matchCat = cat === "all" || p.category === cat;
          const text = (
            p.name +
            " " +
            p.shortDescription +
            " " +
            (p.tags || []).join(" ")
          ).toLowerCase();
          const matchTerm = term === "" || text.includes(term);
          return matchCat && matchTerm;
        });

        renderProducts(filtered);

        if (term || cat !== "all") {
          resultInfo.textContent = `${filtered.length} result${
            filtered.length !== 1 ? "s" : ""
          } found`;
        } else {
          resultInfo.textContent = "All handpicked deals for you.";
        }

        if (window.innerWidth <= 768) {
          productsSection.scrollIntoView({
            behavior: "smooth",
            block: "start",
          });
        }
      }

      function openProduct(id) {
        const p = products.find((x) => x.id === id);
        if (!p) return;

        modalContent.innerHTML = `
          <div class="modal-header">
            <div class="modal-image-wrap">
              <img src="${p.image}" alt="${p.name}" />
            </div>
            <div class="modal-title-wrap">
              <h2>${p.name}</h2>
              <p class="modal-meta">${p.category.toUpperCase()}</p>
            </div>
          </div>
          <div class="price-section">
            <div class="price-container">
              ${
                p.originalPrice && p.originalPrice !== p.price
                  ? `
                      <div class="price-row">
                        <span class="original-price">${formatPrice(
                          p.originalPrice
                        )}</span>
                        <span class="discount-badge">${p.discount}</span>
                      </div>
                    `
                  : ""
              }
              <span class="current-price">${formatPrice(p.price)}</span>
            </div>
            ${
              p.limitedOffer
                ? `
                    <div class="limited-offer">
                      <i class="fas fa-clock"></i>
                      <span class="offer-timer" data-end="${p.offerEnds.toISOString()}"></span>
                    </div>
                  `
                : ""
            }
          </div>
          <p class="modal-description">
            ${p.description || p.shortDescription}
          </p>
          <ul class="features-list">
            ${(p.features || [])
              .map((f) => `<li>${f}</li>`)
              .join("")}
          </ul>
          <div class="store-buttons">
            ${
              p.stores.amazon
                ? `<a href="${p.stores.amazon}" target="_blank" rel="noopener" class="store-btn amazon">
                    <i class="fab fa-amazon"></i> Amazon
                  </a>`
                : ""
            }
            ${
              p.stores.flipkart
                ? `<a href="${p.stores.flipkart}" target="_blank" rel="noopener" class="store-btn flipkart">
                    <i class="fas fa-shopping-cart"></i> Flipkart
                  </a>`
                : ""
            }
            ${
              p.stores.meesho
                ? `<a href="${p.stores.meesho}" target="_blank" rel="noopener" class="store-btn meesho">
                    <i class="fas fa-store"></i> Meesho
                  </a>`
                : ""
            }
            ${
              p.stores.myntra
                ? `<a href="${p.stores.myntra}" target="_blank" rel="noopener" class="store-btn myntra">
                    <i class="fas fa-tshirt"></i> Myntra
                  </a>`
                : ""
            }
          </div>
        `;

        modal.classList.add("open");
        modal.setAttribute("aria-hidden", "false");
        document.body.classList.add("no-scroll");

        document
          .querySelectorAll("#modalContent .offer-timer")
          .forEach((timer) => {
            updateTimer(timer);
            const id = setInterval(() => {
              if (!document.body.contains(timer)) {
                clearInterval(id);
                return;
              }
              updateTimer(timer);
            }, 1000);
          });
      }

      function closeModal() {
        modal.classList.remove("open");
        modal.setAttribute("aria-hidden", "true");
        document.body.classList.remove("no-scroll");
      }

      document
        .querySelectorAll("[data-close-modal]")
        .forEach((el) => el.addEventListener("click", closeModal));

      document.addEventListener("keydown", (e) => {
        if (e.key === "Escape" && modal.classList.contains("open")) {
          closeModal();
        }
      });

      searchInput.addEventListener("input", filterProducts);
      categorySelect.addEventListener("change", filterProducts);

      renderProducts(products);
    </script>
  </body>
</html>

